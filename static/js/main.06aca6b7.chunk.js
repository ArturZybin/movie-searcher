(this["webpackJsonpmovie-searcher"]=this["webpackJsonpmovie-searcher"]||[]).push([[0],{13:function(e,t,a){e.exports=a(21)},20:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(12),r=a.n(o),c=a(9),i=a(2),s=a(3),m=a(5),u=a(4),p=a(6);var E=function(e){return l.a.createElement("div",{className:e.isClosed?"filter filter_closed":"filter"},l.a.createElement("div",{className:"filter__select"},l.a.createElement("select",{name:"type",onChange:function(t){return e.handleTypeChange(t.target.value)}},l.a.createElement("option",{value:""},"Select what to search"),l.a.createElement("option",null,"Movie"),l.a.createElement("option",null,"Series"),l.a.createElement("option",null,"Episode"))),l.a.createElement("div",{className:"filter__select"},l.a.createElement("select",{name:"genre",onChange:function(t){return e.handleGenreChange(t.target.value)}},l.a.createElement("option",{value:""},"Select genre"),l.a.createElement("option",null,"Action"),l.a.createElement("option",null,"Adventure"),l.a.createElement("option",null,"Animation"),l.a.createElement("option",null,"Biography"),l.a.createElement("option",null,"Comedy"),l.a.createElement("option",null,"Crime"),l.a.createElement("option",null,"Documentary"),l.a.createElement("option",null,"Drama"),l.a.createElement("option",null,"Fantasy"),l.a.createElement("option",null,"Horror"),l.a.createElement("option",null,"Music"),l.a.createElement("option",null,"Sci-Fi"),l.a.createElement("option",null,"War"),l.a.createElement("option",null,"Western"))),l.a.createElement("div",{className:"filter__select"},l.a.createElement("select",{name:"year",onChange:function(t){return e.handleYearChange(t.target.value)}},l.a.createElement("option",{value:""},"Select year"),l.a.createElement("option",null,"2020"),l.a.createElement("option",null,"2019"),l.a.createElement("option",null,"2018"),l.a.createElement("option",null,"2017"),l.a.createElement("option",null,"2016"),l.a.createElement("option",null,"2015"),l.a.createElement("option",null,"2014"),l.a.createElement("option",null,"2013"),l.a.createElement("option",null,"2012"),l.a.createElement("option",null,"2011"),l.a.createElement("option",null,"2010"),l.a.createElement("option",null,"2009"),l.a.createElement("option",null,"2008"),l.a.createElement("option",null,"2007"),l.a.createElement("option",null,"2006"),l.a.createElement("option",null,"2005"),l.a.createElement("option",null,"2004"),l.a.createElement("option",null,"2003"),l.a.createElement("option",null,"2002"),l.a.createElement("option",null,"2001"),l.a.createElement("option",null,"2000"),l.a.createElement("option",null,"1999"),l.a.createElement("option",null,"1998"),l.a.createElement("option",null,"1997"),l.a.createElement("option",null,"1996"),l.a.createElement("option",null,"1995"),l.a.createElement("option",null,"1994"),l.a.createElement("option",null,"1993"),l.a.createElement("option",null,"1992"),l.a.createElement("option",null,"1991"),l.a.createElement("option",null,"1990"),l.a.createElement("option",null,"1989"),l.a.createElement("option",null,"1988"),l.a.createElement("option",null,"1987"),l.a.createElement("option",null,"1986"),l.a.createElement("option",null,"1985"),l.a.createElement("option",null,"1984"),l.a.createElement("option",null,"1983"),l.a.createElement("option",null,"1982"),l.a.createElement("option",null,"1981"),l.a.createElement("option",null,"1980"),l.a.createElement("option",null,"1979"),l.a.createElement("option",null,"1978"),l.a.createElement("option",null,"1977"),l.a.createElement("option",null,"1976"),l.a.createElement("option",null,"1975"),l.a.createElement("option",null,"1974"),l.a.createElement("option",null,"1973"),l.a.createElement("option",null,"1972"),l.a.createElement("option",null,"1971"),l.a.createElement("option",null,"1970"),l.a.createElement("option",null,"1969"),l.a.createElement("option",null,"1968"),l.a.createElement("option",null,"1967"),l.a.createElement("option",null,"1966"),l.a.createElement("option",null,"1965"),l.a.createElement("option",null,"1964"),l.a.createElement("option",null,"1963"),l.a.createElement("option",null,"1962"),l.a.createElement("option",null,"1961"),l.a.createElement("option",null,"1960"),l.a.createElement("option",null,"1959"),l.a.createElement("option",null,"1958"),l.a.createElement("option",null,"1957"),l.a.createElement("option",null,"1956"),l.a.createElement("option",null,"1955"),l.a.createElement("option",null,"1954"),l.a.createElement("option",null,"1953"),l.a.createElement("option",null,"1952"),l.a.createElement("option",null,"1951"),l.a.createElement("option",null,"1950"),l.a.createElement("option",null,"1949"),l.a.createElement("option",null,"1948"),l.a.createElement("option",null,"1947"),l.a.createElement("option",null,"1946"),l.a.createElement("option",null,"1945"),l.a.createElement("option",null,"1944"),l.a.createElement("option",null,"1943"),l.a.createElement("option",null,"1942"),l.a.createElement("option",null,"1941"),l.a.createElement("option",null,"1940"),l.a.createElement("option",null,"1939"),l.a.createElement("option",null,"1938"),l.a.createElement("option",null,"1937"),l.a.createElement("option",null,"1936"),l.a.createElement("option",null,"1935"),l.a.createElement("option",null,"1934"),l.a.createElement("option",null,"1933"),l.a.createElement("option",null,"1932"),l.a.createElement("option",null,"1931"),l.a.createElement("option",null,"1930"))))},h=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={isFilterClosed:!0,isCentered:!0,title:null,type:null,genre:null,year:null},a.triggerEnterKeySearch=function(e){13===e.keyCode&&a.handleSearch()},a.handleSearch=function(){var e=a.state,t=e.isCentered,n=e.title,l=e.type,o=e.genre,r=e.year;n&&(t&&a.setState({isCentered:!1}),a.props.handleSearch({title:n,type:l,genre:o,year:r}))},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.isCentered,n=t.isFilterClosed;return l.a.createElement("div",{className:a?"searchbar searchbar_centered":"searchbar"},l.a.createElement("input",{className:"searchbar__input",type:"text",placeholder:"Search movies",autoFocus:!0,onChange:function(t){return e.setState({title:t.target.value})},onKeyDown:this.triggerEnterKeySearch}),l.a.createElement("button",{className:"searchbar__filter-button searchbar__button",onClick:function(){return e.setState({isFilterClosed:!n})}}),l.a.createElement("button",{className:"searchbar__search-button searchbar__button",onClick:this.handleSearch}),l.a.createElement(E,{isClosed:n,handleTypeChange:function(t){return e.setState({type:t})},handleGenreChange:function(t){return e.setState({genre:t})},handleYearChange:function(t){return e.setState({year:t})}}))}}]),t}(l.a.Component);var d=function(e){return l.a.createElement("input",{className:"theme-toggler",type:"checkbox",onChange:e.handleToggle})},v=a(7),f=a.n(v),_=a(10),b=a(8),g=a(1);var S=function(e){if(e.isError)return l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"movie__close-full-info-button",onClick:e.handleCloseButtonClick},"\u2718"),l.a.createElement("div",{className:"error-message error-message_size_small"},"Check your connection"));var t=e.data,a=t.Ratings.map((function(e){return l.a.createElement("span",{key:e.Source},e.Source,":"," ",l.a.createElement("span",{className:"movie__rating"},e.Value),", ")}));return a.length||(a="N/A"),l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"movie__close-full-info-button",onClick:e.handleCloseButtonClick},"\u2718"),l.a.createElement("div",{className:"movie__runtime movie__label"},t.Runtime),l.a.createElement("div",{className:"movie__common-info"},t.Plot),l.a.createElement("div",{className:"movie__common-info"},l.a.createElement("span",{className:"movie__common-info-title"},"Genre: "),t.Genre),l.a.createElement("div",{className:"movie__common-info"},l.a.createElement("span",{className:"movie__common-info-title"},"Released: "),t.Released),l.a.createElement("div",{className:"movie__common-info"},l.a.createElement("span",{className:"movie__common-info-title"},"Actors: "),t.Actors),l.a.createElement("div",{className:"movie__common-info"},l.a.createElement("span",{className:"movie__common-info-title"},"Director: "),t.Director),l.a.createElement("div",{className:"movie__common-info"},l.a.createElement("span",{className:"movie__common-info-title"},"Box office: "),t.BoxOffice),l.a.createElement("div",{className:"movie__common-info"},l.a.createElement("span",{className:"movie__common-info-title"},"Awards: "),t.Awards),l.a.createElement("div",{className:"movie__common-info"},l.a.createElement("span",{className:"movie__common-info-title"},"Ratings: "),a))},y=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={isFullDataLoaded:!1,fullData:{},isFullInfoOpened:!1,isError:!1},a.loadFullData=Object(b.a)(f.a.mark((function e(){var t,n,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.createURL(),e.prev=1,e.next=4,fetch(t);case 4:return l=e.sent,e.next=7,l.json();case 7:n=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),a.setState({isError:!0}),e.abrupt("return");case 14:a.state.isError&&a.setState({isError:!1}),a.setState({isFullDataLoaded:!0,fullData:n});case 16:case"end":return e.stop()}}),e,null,[[1,10]])}))),a.createURL=function(){var e=a.props.data.API_KEY,t=a.props.data.imdbID,n=new URL("https://www.omdbapi.com");return n.searchParams.set("apikey",e),n.searchParams.set("i",t),n},a.openFullInfo=function(e){e.stopPropagation(),a.state.isFullInfoOpened||(a.state.isFullDataLoaded||a.loadFullData(),a.setState({isFullInfoOpened:!0}))},a.closeFullInfo=function(){a.state.isFullInfoOpened&&a.setState({isFullInfoOpened:!1})},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.data,t=e.Poster,a=e.Title,n=e.Year,o=e.Type,r=this.state,c=r.isFullInfoOpened,i=r.isFullDataLoaded,s=r.isError;return l.a.createElement("div",null,l.a.createElement("div",{className:c?"movie-locker":"",onClick:this.closeFullInfo},l.a.createElement("div",{className:c?"movie movie_opened":"movie",onClick:this.openFullInfo},"N/A"===t?l.a.createElement("div",{className:"movie__poster movie__poster-replacer"}):l.a.createElement("img",{className:"movie__poster",src:t,alt:"poster"}),l.a.createElement("h2",{className:"movie__title"},a),l.a.createElement("div",{className:"movie__year movie__label"},n),l.a.createElement("div",{className:"movie__type movie__label"},o),c&&i||c&&s?l.a.createElement(S,{isError:s,handleCloseButtonClick:this.closeFullInfo,data:this.state.fullData}):null)))}}]),t}(l.a.PureComponent);var N=function(e){var t=Object(n.useState)(0),a=Object(g.a)(t,2),o=a[0],r=a[1],i=Object(n.useState)(0),s=Object(g.a)(i,2),m=s[0],u=s[1],p=Object(n.useState)([]),E=Object(g.a)(p,2),h=E[0],d=E[1],v=Object(n.useState)(0),S=Object(g.a)(v,2),N=S[0],C=S[1],O=Object(n.useState)(!1),j=Object(g.a)(O,2),k=j[0],w=j[1],F=Object(n.useState)(""),D=Object(g.a)(F,2),I=D[0],A=D[1];function P(e){return R.apply(this,arguments)}function R(){return(R=Object(b.a)(f.a.mark((function e(t){var a,n,l,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x(a=t?1:N+1),e.prev=2,e.next=5,fetch(n);case 5:return c=e.sent,e.next=8,c.json();case 8:l=e.sent,e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(2),L("Check your connection"),e.abrupt("return");case 15:if("False"!==l.Response){e.next=18;break}return L(l.Error),e.abrupt("return");case 18:k&&w(!1),r(t?l.Search.length:o+l.Search.length),l.totalResults&&u(+l.totalResults),d(t?Object(_.a)(l.Search):[].concat(Object(_.a)(h),Object(_.a)(l.Search))),C(a);case 23:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}function x(t){var a=e.data,n=a.API_KEY,l=a.title,o=a.type,r=a.year,c=new URL("https://www.omdbapi.com");return c.searchParams.set("apikey",n),c.searchParams.set("s",l),o&&c.searchParams.set("type",o),r&&c.searchParams.set("y",r),c.searchParams.set("page",t),c}function L(e){w(!0),"Movie not found!"===e||"Check your connection"===e?A(e):"Too many results."===e?A("Too many results, your request must be more specific"):(console.log(e),A("Something went wrong..."))}return Object(n.useEffect)((function(){e.shouldStartNewSearch&&(e.handleSearchStart(),r(0),u(0),d([]),C(0),P(!0))}),[e.shouldStartNewSearch]),k?l.a.createElement("div",{className:"error-message"},I):l.a.createElement("div",{className:"movies-list"},l.a.createElement("div",{className:"movies-list__movies-container"},h.map((function(t){return l.a.createElement(y,{data:Object(c.a)({},t,{API_KEY:e.data.API_KEY}),key:t.imdbID})}))),0===m?l.a.createElement("div",{className:"movies-list__loading"},"  ",l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),"  "):m===o?l.a.createElement("button",{className:"movies-list__movies-over"},"That's all"):l.a.createElement("button",{className:"movies-list__show-more-button",onClick:function(){return P(!1)}},"Show more"))},C=(a(19),a(20),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={shouldStartNewSearch:!1,searchData:{},shouldRenderMoviesList:!1,theme:"dark"},a.toggleTheme=function(e){var t=e.target.checked?"light":"dark";a.setState({theme:t})},a.startSearching=function(e){a.setState({shouldStartNewSearch:!0,searchData:Object(c.a)({},e,{API_KEY:"1ff05d65"})})},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.shouldRenderMoviesList,n=t.searchData,o=t.shouldStartNewSearch;return l.a.createElement("main",{id:"app-root",className:"theme-".concat(this.state.theme)},l.a.createElement(d,{handleToggle:this.toggleTheme}),l.a.createElement(h,{handleSearch:function(t){e.startSearching(t),e.setState({shouldRenderMoviesList:!0})}}),a&&l.a.createElement(N,{data:n,shouldStartNewSearch:o,handleSearchStart:function(){return e.setState({shouldStartNewSearch:!1})}}))}}]),t}(l.a.Component));r.a.render(l.a.createElement(C,null),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.06aca6b7.chunk.js.map